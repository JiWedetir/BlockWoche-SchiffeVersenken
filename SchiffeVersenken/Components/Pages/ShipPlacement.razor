@page "/ShipPlacement"
@inject Microsoft.AspNetCore.Components.NavigationManager NavigationManager;
@inherits LayoutComponentBase
@inject IDialogService DialogService;
@using IImage = Microsoft.Maui.Graphics.IImage;


<MudStack style="@($"height:100%; width: 100%; background-image: {_bgUrl}; background-size: cover; background-position: center; background-repeat: no-repeat;")" Justify="Justify.SpaceEvenly" AlignItems="AlignItems.Center">
    <MudText Align="Align.Center" Typo="Typo.h5"><b>Ship Placement</b></MudText>

    <MudStack Row="true" Spacing="10">
        <!-- SVG-Platzierung -->
        <MudStack Class="align-center" Style="border: 1px solid black; width: 35vw; height: 35vw;">
            <MudContainer Class="d-flex flex-wrap justify-space-evenly" Style="width: 100%; padding: 0; margin: 0;">
                @foreach (var ship in _ships)
                {
                    <div style="width: 8.5vw; height: 8.5vw; display: flex; justify-content: center; align-items: center;">
                        @PlaceShipSVG(ship)
                    </div>
                }
            </MudContainer>
            <MudButtonGroup Variant="Variant.Filled" Style="margin-top: auto; background-color: white">
                <MudButton @onclick="ChangeOrientation" EndIcon="@Icons.Material.Filled.Rotate90DegreesCw"> Drehen</MudButton>
                <MudButton @onclick="OnClickResetLastShip" EndIcon="@Icons.Material.Filled.ArrowBack">Reset Ship</MudButton>
                <MudButton @onclick="OnClickResetAll" EndIcon="@Icons.Material.Filled.SettingsBackupRestore">Reset All</MudButton>
            </MudButtonGroup>
        </MudStack>

        <BattleFieldComponent FieldType="@BattleFieldComponent.FieldTypes.PlacementField" Field="@_board" OnFieldClicked="@OnSquareClick" />
    </MudStack>
	
	<MudButton OnClick="GoToNextPage" Variant="Variant.Filled" Style="background-color: white" Disabled=@(_shipsPlaced.Count() != _ships.Count())>Start the Battle!!</MudButton>
</MudStack>

